(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{226:function(s,t,n){"use strict";n.r(t);var a=n(0),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"è·¨åŸŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸ","aria-hidden":"true"}},[s._v("#")]),s._v(" è·¨åŸŸ")]),s._v(" "),n("p",[n("strong",[s._v("åŒæºï¼š")]),n("br"),s._v("\nä¸¤ä¸ªç½‘é¡µçš„åè®®ã€åŸŸåã€ç«¯å£å‡ç›¸åŒã€‚")]),s._v(" "),n("p",[n("strong",[s._v("åŒæºé™åˆ¶ï¼š")]),n("br"),s._v("\nåè®®ã€åŸŸåã€ç«¯å£æœ‰ä»»ä½•ä¸€ä¸ªä¸åŒå³ä¸ºè·¨åŸŸã€‚"),n("br"),s._v(" "),n("strong",[s._v("ç›®çš„ï¼š")]),n("br"),s._v("\nä¸»è¦æ˜¯ä¸ºäº†å®‰å…¨é—®é¢˜ï¼Œä¿æŠ¤æµè§ˆå™¨çš„cookieï¼Œå¦‚æžœæ²¡æœ‰åŒæºé™åˆ¶ï¼Œå½“æˆ‘ä»¬è®¿é—®æ¶æ„ç½‘ç«™æ—¶ï¼Œå°±èƒ½èŽ·å–æˆ‘ä»¬çš„cookieå€¼ï¼Œcookieä¸­å­˜å‚¨çš„æ˜¯æœåŠ¡ç«¯è¿”å›žçš„sessionId, å¦‚æžœsessionIdæ²¡æœ‰è¿‡æœŸï¼Œé€šè¿‡å·²ç»å»ºç«‹å¥½çš„sessionè¿žæŽ¥ï¼Œå°±èƒ½è¿›è¡Œæ”»å‡»ã€‚")]),s._v(" "),n("p",[n("strong",[s._v("ä¸ºä»€ä¹ˆè·¨åŸŸï¼š")]),n("br"),s._v("\nå› ä¸ºå‰åŽç«¯åˆ†ç¦»ï¼Œåœ¨çœŸå®žå¼€å‘ä¸­ï¼Œå‰ç«¯æƒ³åŽç«¯å‘é€è¯·æ±‚èŽ·å–æ•°æ®ï¼Œä½†å‰åŽç«¯çš„åŸŸåæ˜¯ä¸ä¸€è‡´çš„ï¼Œæ‰€ä»¥å°±ä¼šå‘ç”Ÿè·¨åŸŸã€‚"),n("strong",[s._v("æ‰€è°“è·¨åŸŸæ˜¯æŒ‡è·¨åŸŸåã€‚åŒä¸€åŸŸåæ˜¯æŒ‡åè®®ã€åŸŸåã€ç«¯å£ä¸‰è€…å‡ç›¸åŒï¼Œä»»ä¸€ä¸åŒéƒ½ä¸å±žäºŽåŒä¸€åŸŸå")]),s._v("ã€‚")]),s._v(" "),n("p",[n("strong",[s._v("å‘é€è¯·æ±‚ï¼šajax( async javascript and XML )")])]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("ä½œç”¨")]),s._v("ï¼šæµè§ˆå™¨æä¾›ï¼Œ å¯å®žçŽ°é¡µé¢æ— åˆ·æ–°æ›´æ–°æ•°æ®ã€‚")]),s._v(" "),n("li",[n("strong",[s._v("åŽŸç†")]),s._v("ï¼šé€šè¿‡XmlHttpRequestå¯¹è±¡æ¥å‘æœåŠ¡å™¨å‘å¼‚æ­¥è¯·æ±‚ï¼Œä»ŽæœåŠ¡å™¨èŽ·å¾—æ•°æ®ï¼Œç„¶åŽç”¨javascriptæ¥æ“ä½œDOMè€Œæ›´æ–°é¡µé¢ã€‚è¿™å…¶ä¸­æœ€å…³é”®çš„ä¸€æ­¥å°±æ˜¯ä»ŽæœåŠ¡å™¨èŽ·å¾—è¯·æ±‚æ•°æ®ã€‚")])]),s._v(" "),n("p",[n("strong",[s._v("ä½¿ç”¨æ–¹æ³•ï¼š")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("XMLHttpRequest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" xhr "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XMLHttpRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å…¼å®¹ie")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" xhr "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ActiveXObject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Microsoft.XMLHTTP'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‘Šè¯‰ajaxè¯·æ±‚æ–¹å¼å’Œè¯·æ±‚åœ°å€")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// open(method,url,async) async:trueæˆ–è€…falseï¼Œé»˜è®¤æ˜¯true,è¡¨ç¤ºå¼‚æ­¥")]),s._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'get'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://localhost:3000/index'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‘é€è¯·æ±‚")]),s._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// èŽ·å–æœåŠ¡ç«¯çš„å“åº”")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ajaxæŽ¥æ”¶å®Œå®¢æˆ·ç«¯çš„å“åº”å°±è§¦å‘onload")]),s._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onreadystatechange")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("readystate"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ResponseText"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//çŠ¶æ€ç ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\nxhr.readystate \n0ï¼šunsend  //å½“å‰è¯·æ±‚è¿˜æœªå‘é€;  XMLHttpRequestå¯¹è±¡å·²ç»åˆ›å»º\n1ï¼šopened //URLåœ°å€å·²ç»æ‰“å¼€ï¼›æ­£åœ¨å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ã€‚\n2ï¼šheaders_received //å“åº”å¤´ä¿¡æ¯å·²ç»æŽ¥æ”¶ï¼›å·²ç»æŽ¥æ”¶å®Œå…¨éƒ¨å“åº”æ•°æ®\n3ï¼šloading // ä¸»è¦çš„è¿”å›žæ•°æ®æ­£åœ¨æœåŠ¡å™¨è¿›è¡Œå‡†å¤‡å¤„ç†ï¼›æ­£åœ¨è§£æžæ•°æ®ã€‚\n4ï¼šdone //å“åº”ä¸»ä½“çš„å†…å®¹å·²ç»æˆåŠŸè¿”å›žå®¢æˆ·ç«¯ï¼›æ•°æ®è§£æžå®Œæ¯•\n//------------------------------------------\nxhr.status æœåŠ¡å™¨çŠ¶æ€ç \n101ï¼šåˆ‡æ¢åè®®ã€‚æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ‡æ¢ï¼Œåªèƒ½åˆ‡æ¢åˆ°æ›´é«˜çº§ã€‚\n200åŠä»¥2å¼€å¤´çš„ï¼šæˆåŠŸï¼ˆå“åº”çš„ä¸»ä½“å·²ç»æˆåŠŸè¿”å›žå®¢æˆ·ç«¯ï¼‰\n204ï¼šæ— å†…å®¹ã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†ï¼Œä½†æœªè¿”å›žå†…å®¹ã€‚åœ¨æœªæ›´æ–°ç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯ç¡®ä¿æµè§ˆå™¨ç»§ç»­æ˜¾ç¤ºå½“å‰æ–‡æ¡£\n206ï¼š éƒ¨åˆ†å†…å®¹ã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†éƒ¨åˆ†GETè¯·æ±‚\n301ï¼šæ°¸ä¹…é‡å®šå‘/è½¬ç§»\n302: ä¸´æ—¶é‡å®šå‘/è½¬ç§»\n303ï¼š å¯¹åº”å½“å‰è¯·æ±‚çš„å“åº”å¯ä»¥åœ¨å¦ä¸€ä¸ªURIä¸Šè¢«æ‰¾åˆ°ï¼Œè€Œä¸”å®¢æˆ·ç«¯åº”å½“é‡‡ç”¨GETçš„æ–¹å¼è®¿é—®é‚£ä¸ªèµ„æºã€‚\n304ï¼šæœ¬æ¬¡èŽ·å–çš„å†…å®¹æ˜¯è¯»å–çš„ç¼“å­˜\n400ï¼šå®¢æˆ·ç«¯->æœåŠ¡å™¨çš„å‚æ•°é”™è¯¯ï¼Œè¯·æ±‚æ— æ•ˆï¼›æœåŠ¡å™¨ä¸ç†è§£è¯·æ±‚çš„è¯­æ³•ã€‚ \n401ï¼šæ— æƒé™è®¿é—®ï¼Œå½“å‰è¯·æ±‚éœ€è¦éªŒè¯\n403ï¼šæœåŠ¡å™¨å¾—åˆ°è¯·æ±‚ï¼Œä½†æ‹’ç»æ‰§è¡Œ\n404ï¼šè®¿é—®åœ°å€ä¸å­˜åœ¨\n500ï¼šæœªçŸ¥çš„æœåŠ¡å™¨é”™è¯¯ï¼›æœåŠ¡å™¨é‡åˆ°é”™è¯¯,æ— æ³•å®Œæˆè¯·æ±‚ã€‚\n501ï¼šæœåŠ¡å™¨è¶…è´Ÿè·\n502ï¼šä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»Žè¿œç¨‹æœåŠ¡å™¨æŽ¥æ”¶åˆ°äº†ä¸€ä¸ªæ— æ•ˆçš„å“åº”\n503:ï¼ˆæœåŠ¡ä¸å¯ç”¨ï¼‰æœåŠ¡å™¨ç›®å‰æ— æ³•ä½¿ç”¨ï¼ˆç”±äºŽè¶…è½½æˆ–åœæœºç»´æŠ¤ï¼‰ã€‚ é€šå¸¸ï¼Œè¿™åªæ˜¯æš‚æ—¶çŠ¶æ€ã€‚\n*/")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br")])]),n("p",[n("strong",[s._v("301å’Œ302çš„åŒºåˆ«:")])]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("é‡å®šå‘")]),s._v("ï¼šæ˜¯è¯´æµè§ˆå™¨åœ¨æ‹¿åˆ°æœåŠ¡å™¨è¿”å›žçš„è¿™ä¸ªçŠ¶æ€ç åŽä¼šè‡ªåŠ¨è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„URLåœ°å€ï¼Œè¿™ä¸ªåœ°å€å¯ä»¥ä»Žå“åº”çš„Locationé¦–éƒ¨ä¸­èŽ·å–ï¼ˆç”¨æˆ·çœ‹åˆ°çš„æ•ˆæžœå°±æ˜¯ä»–è¾“å…¥çš„åœ°å€Açž¬é—´å˜æˆäº†å¦ä¸€ä¸ªåœ°å€Bï¼‰")]),s._v(" "),n("li",[n("strong",[s._v("301æ˜¯æ°¸ä¹…é‡å®šå‘")]),s._v("ï¼šè¯·æ±‚èµ„æºè¢«æ°¸ä¹…ç§»åˆ°æ–°çš„ä½ç½®ã€‚å¸¸ç”¨çš„åœºæ™¯æ˜¯ä½¿ç”¨"),n("strong",[s._v("åŸŸåè·³è½¬")]),s._v("ã€‚æ¯”å¦‚æˆ‘ä»¬è®¿é—® "),n("strong",[s._v("http")]),s._v("ðŸ˜•/www.baidu.com ä¼šè·³è½¬åˆ° "),n("strong",[s._v("https")]),s._v("ðŸ˜•/www.baidu.comã€‚ "),n("strong",[s._v("301è¯·æ±‚æ˜¯å¯ä»¥ç¼“å­˜çš„")])]),s._v(" "),n("li",[n("strong",[s._v("302æ˜¯ä¸´æ—¶é‡å®šå‘")]),s._v("ï¼šåªæ˜¯ä¸´æ—¶è·³è½¬åˆ°è¿™ä¸ªåœ°å€ï¼Œä¸‹ä¸€æ¬¡è¯·æ±‚çš„ä»ç„¶æ˜¯åŽŸåœ°å€ã€‚"),n("strong",[s._v("å¸¸ç”¨åœºæ™¯")]),s._v("ï¼šæ¯”å¦‚æœªç™»é™†çš„ç”¨æˆ·è®¿é—®ç”¨æˆ·ä¸­å¿ƒé‡å®šå‘åˆ°ç™»å½•é¡µé¢ã€‚å¯ä»¥è®°å½•ç‚¹å‡»æ¬¡æ•°ï¼Œå¯¹å¤§æ•°æ®åˆ†æžæœ‰ç”¨")])]),s._v(" "),n("p",[n("strong",[s._v("è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼š")])]),s._v(" "),n("ul",[n("li",[s._v("1ã€jsonp ( json with padding ) ä¸å±žäºŽajaxï¼Œä½†å¯æ¨¡æ‹Ÿajaxè¯·æ±‚")]),s._v(" "),n("li",[s._v("2ã€CORS ( Cross Origin Resource Sharing )  è·¨åŸŸèµ„æºå…±äº«")]),s._v(" "),n("li",[s._v("3ã€proxy ä»£ç†æœåŠ¡å™¨")]),s._v(" "),n("li",[s._v("4ã€nginx")]),s._v(" "),n("li",[s._v("5ã€document.domain + iframe")])]),s._v(" "),n("p",[n("strong",[s._v("1ã€jsonp")])]),s._v(" "),n("ul",[n("li",[s._v("åŽŸç† ï¼šåŠ¨æ€æ’å…¥ "),n("code",[s._v("script")]),s._v(" æ ‡ç­¾ï¼Œé€šè¿‡ "),n("code",[s._v("script")]),s._v(" æ ‡ç­¾å¼•å…¥ä¸€ä¸ª "),n("code",[s._v("js")]),s._v(" æ–‡ä»¶ï¼Œè¿™ä¸ªjsæ–‡ä»¶è½½å…¥æˆåŠŸåŽä¼šæ‰§è¡Œæˆ‘ä»¬åœ¨urlå‚æ•°ä¸­æŒ‡å®šçš„å‡½æ•°ï¼Œå¹¶ä¸”ä¼šæŠŠæˆ‘ä»¬éœ€è¦çš„ "),n("code",[s._v("json")]),s._v(" æ•°æ®ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚")]),s._v(" "),n("li",[s._v("ä¼˜ç‚¹æ˜¯å…¼å®¹æ€§å¥½ï¼Œç®€å•æ˜“ç”¨ï¼Œæ”¯æŒæµè§ˆå™¨ä¸ŽæœåŠ¡å™¨åŒå‘é€šä¿¡ã€‚ç¼ºç‚¹æ˜¯åªæ”¯æŒGETè¯·æ±‚ã€‚")]),s._v(" "),n("li",[s._v("jsonæ˜¯ä¸€ç§è½»é‡çº§çš„"),n("strong",[s._v("æ•°æ®äº¤æ¢æ ¼å¼")]),s._v("ã€‚jsonpæ˜¯ä¸€ç§"),n("strong",[s._v("è·¨åŸŸæ•°æ®äº¤äº’åè®®")]),s._v("ã€‚")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ©ç”¨scriptæ ‡ç­¾å¯è·¨åŸŸï¼Œæ— åŒæºé™åˆ¶")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¤„ç†æ€æƒ³ï¼š å°†å‡½æ•°ä¼ å›žæœåŠ¡ç«¯ï¼Œåˆ©ç”¨æœåŠ¡ç«¯çš„æ•°æ®ï¼Œå°†è°ƒç”¨å‡½æ•°çš„è¡Œä¸ºä¼ å›žå®¢æˆ·ç«¯è¿›è¡Œè°ƒç”¨")]),s._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fn2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  \tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'å®¢æˆ·ç«¯çš„fnå‡½æ•°è¢«è°ƒç”¨äº†'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  \tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// èŽ·å–æŒ‰é’®")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" btn "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'btn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸ºæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶")]),s._v("\n  btn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onclick")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºscriptæ ‡ç­¾")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" script "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'script'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¾ç½®srcå±žæ€§")]),s._v("\n      script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://localhost:3001/better?callback=fn2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°†scriptæ ‡ç­¾è¿½åŠ åˆ°é¡µé¢ä¸­")]),s._v("\n      document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸ºscriptæ ‡ç­¾æ·»åŠ onloadäº‹ä»¶")]),s._v("\n      script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onload")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°†bodyä¸­çš„scriptæ ‡ç­¾åˆ é™¤æŽ‰")]),s._v("\n      document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("script"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŽŸç†æ€»ç»“ï¼šjsonpé€šè¿‡åŠ¨æ€åˆ›å»ºçš„scriptæ ‡ç­¾ï¼Œå‘é€çš„urlè¯·æ±‚è‡ªåŠ¨æ·»åŠ äº†ä¸€ä¸ªcallbackå‚æ•°ï¼Œå½“åŽå°å‘çŽ°callbackå‚æ•°æ—¶ï¼Œå°±è®¤ä¸ºæ˜¯ä¸€ä¸ªjsonpè¯·æ±‚ï¼Œå“åº”å¤´åœ¨è¿”å›žæ•°æ®æ—¶ï¼Œæ•°æ®æ ¼å¼å°±ç”±jsonå˜æˆscriptï¼Œè€Œscriptçš„å†…å®¹å°±æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚  \t")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åœ¨è¯·æ±‚å®Œæ¯•åŽå¯ä»¥é€šè¿‡è°ƒç”¨callbackçš„æ–¹å¼å›žä¼ ç»“æžœã€‚å°†å›žè°ƒæ–¹æ³•çš„æƒé™ç»™äº†è°ƒç”¨æ–¹ã€‚è¿™ä¸ªå°±ç›¸å½“äºŽå°†controllerå±‚å’Œviewå±‚ç»ˆäºŽåˆ†å¼€äº†ã€‚")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//------------------------------æœåŠ¡ç«¯--------------------------------")]),s._v("\n  app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/better'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  \t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŽ¥æ”¶å®¢æˆ·ç«¯ä¼ é€’è¿‡æ¥çš„å‡½æ•°çš„åç§°")]),s._v("\n  \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" fnName "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("query"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°†å‡½æ•°åç§°å¯¹åº”çš„å‡½æ•°è°ƒç”¨ä»£ç è¿”å›žç»™å®¢æˆ·ç«¯")]),s._v("\n  \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" data "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å¼ ä¸‰"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" fnName "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'('")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" data "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("')'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \t "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  \t \tres"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("result"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \t "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  \t\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç¼ºé™·ï¼š åªèƒ½å‘é€Getè¯·æ±‚ï¼› ä¸å®‰å…¨   ")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("p",[n("strong",[s._v("2ã€CORS ( Cross Origin Resource Sharing )  è·¨åŸŸèµ„æºå…±äº«")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ€æƒ³: åœ¨æœåŠ¡ç«¯è¿›è¡Œç›¸å…³è®¾ç½®ï¼Œæµè§ˆå™¨å°±å¯ä»¥è¿›è¡Œè·¨åŸŸè®¿é—®äº†")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸»è¦å°±æ˜¯é€šè¿‡è®¾ç½® Access-Control-Allow-Origin æ¥è¿›è¡Œçš„")]),s._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å…è®¸æ‰€æœ‰å®¢æˆ·ç«¯è®¿é—®")]),s._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("header")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Access-Control-Allow-Origin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Access-Control-Request-Headersç”¨æ¥å°†å®žé™…è¯·æ±‚æ‰€æºå¸¦çš„é¦–éƒ¨å­—æ®µå‘Šè¯‰æœåŠ¡å™¨")]),s._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("header")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Access-Control-Allow-Headers: X-Requested-With, Content-Type'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¾ç½®ä¸ºtrueæ—¶ï¼Œ origin ä¸èƒ½ä¸º * ï¼›")]),s._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("header")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Access-Control-Allow-Credentials"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å…è®¸ä»¥é‚£äº›æ–¹å¼è¿›è¡Œè®¿é—®")]),s._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("header")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Access-Control-Allow-Methods'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET, POST, PUT, DELETE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[n("strong",[s._v("CORSçš„è¯·æ±‚æ–¹æ³•")]),s._v("ï¼šGET, POST, HEAD, PUT, DELETEç­‰")]),s._v(" "),n("p",[n("strong",[s._v("CORSåˆ†ä¸¤ç§è¯·æ±‚æ–¹å¼")]),s._v("ï¼š"),n("strong",[s._v("ç®€å•è¯·æ±‚")]),s._v("å’Œ"),n("strong",[s._v("éžç®€å•è¯·æ±‚")])]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("ç®€å•è¯·æ±‚")]),s._v("ï¼š1. è¯·æ±‚æ–¹å¼æ˜¯HEAD,GET,POSTï¼›2.httpå¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å­—æ®µï¼šAcceptã€Accept-Language ã€ Content-Languageã€ Last-Event-IDã€ Content-Type(é™äºŽä¸‰ä¸ªå€¼ï¼šapplication/x-www-form-urlencodedã€multipart/form-dataã€text/plain,  application/json )")]),s._v(" "),n("li",[n("strong",[s._v("éžç®€å•è¯·æ±‚")]),s._v("ï¼šä¸åŒæ—¶æ»¡è¶³ä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶çš„è¯·æ±‚å°±æ˜¯éžç®€å•è¯·æ±‚ã€‚ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•æ˜¯PUTæˆ–DELETEï¼Œæˆ–è€…Content-Typeå­—æ®µçš„ç±»åž‹æ˜¯application/jsonã€‚")])]),s._v(" "),n("p",[s._v("ç®€å•è¯·æ±‚å’Œéžç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨çš„å¤„ç†æ–¹å¼æ˜¯ä¸åŒçš„ã€‚")]),s._v(" "),n("ul",[n("li",[s._v('éžç®€å•è¯·æ±‚çš„CORSè¯·æ±‚ï¼Œä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢žåŠ ä¸€æ¬¡HTTPæŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¸º"é¢„æ£€"è¯·æ±‚ï¼ˆpreflightï¼‰ã€‚"é¢„æ£€"è¯·æ±‚ç”¨çš„è¯·æ±‚æ–¹æ³•æ˜¯'),n("strong",[s._v("OPTIONS")]),s._v("ï¼Œè¡¨ç¤ºè¿™ä¸ªè¯·æ±‚æ˜¯ç”¨æ¥è¯¢é—®çš„ã€‚")]),s._v(" "),n("li",[s._v('æœåŠ¡å™¨æ”¶åˆ°"é¢„æ£€"è¯·æ±‚ä»¥åŽï¼Œæ£€æŸ¥äº†Originã€Access-Control-Request-Methodå’ŒAccess-Control-Request-Headerså­—æ®µä»¥åŽï¼Œç¡®è®¤å…è®¸è·¨æºè¯·æ±‚ï¼Œå°±å¯ä»¥åšå‡ºå›žåº”ã€‚')]),s._v(" "),n("li",[s._v('å¦‚æžœæµè§ˆå™¨å¦å®šäº†"é¢„æ£€"è¯·æ±‚ï¼Œä¼šè¿”å›žä¸€ä¸ªæ­£å¸¸çš„HTTPå›žåº”ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•CORSç›¸å…³çš„å¤´ä¿¡æ¯å­—æ®µã€‚è¿™æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè®¤å®šï¼ŒæœåŠ¡å™¨ä¸åŒæ„é¢„æ£€è¯·æ±‚ï¼Œå› æ­¤è§¦å‘ä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestå¯¹è±¡çš„onerrorå›žè°ƒå‡½æ•°æ•èŽ·ã€‚')])]),s._v(" "),n("p",[n("strong",[s._v("CORSæ—¶å‰ç«¯è¦è®¾ç½®ä»€ä¹ˆ")]),s._v(":")]),s._v(" "),n("ul",[n("li",[s._v("CORS è¯·æ±‚é»˜è®¤æ˜¯ä¸å‘é€ Cookies å’Œ HTTP è®¤è¯ä¿¡æ¯çš„.")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. å‰åŽç«¯åŒæ—¶è®¾ç½®ä»¥ä¸‹ï¼Œ å¯ä»¥è‡ªåŠ¨å‘é€ Cookies, æºå¸¦èº«ä»½å‡­è¯")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æœåŠ¡ç«¯æ ‡è¯†æµè§ˆå™¨è¯·æ±‚CORSæ—¶æ˜¯å¦å¯ä»¥é™„å¸¦èº«ä»½å‡­è¯ï¼Œå¯¹äºŽé™„å¸¦èº«ä»½å‡­è¯çš„è¯·æ±‚ï¼Œ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Access-Control-Allow-Credentials"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("3ã€proxy ä»£ç†æœåŠ¡å™¨")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŒæºé™åˆ¶æ˜¯æµè§ˆå™¨ç»™ä¸Žajaxçš„ï¼Œ æœåŠ¡ç«¯ä¸å­˜åœ¨")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è§£å†³æ–¹æ³•ï¼š Aæµè§ˆå™¨ --è¯·æ±‚--\x3e  AæœåŠ¡å™¨ --è¯·æ±‚--\x3e BæœåŠ¡å™¨")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// node çš„ requestæ¨¡å—")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'request'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// otherä¸ºå…¶ä»–æœåŠ¡å™¨")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("request")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://localhost:3001/other'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reponse"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);